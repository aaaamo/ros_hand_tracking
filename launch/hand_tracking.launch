<launch>
    <!-- ── Core tracker ─────────────────────────────────────────────── -->
    <arg name="model_path"               default=""/>
    <arg name="num_hands"                default="1"/>
    <arg name="min_detection_confidence" default="0.7"/>
    <arg name="min_tracking_confidence"  default="0.5"/>
    <arg name="enable_gesture"           default="False"/>
    <arg name="show_image"               default="False"/>

    <!-- ── Topics ───────────────────────────────────────────────────── -->
    <arg name="subscribe_image_topic"      default="/camera/color/image_raw"/>
    <arg name="publish_landmarks_topic"    default="/hand_tracking/landmarks"/>
    <arg name="publish_gesture_topic"      default="/hand_tracking/gesture"/>
    <arg name="publish_landmarks_3d_topic" default="/hand_tracking/landmarks_3d"/>
    <arg name="publish_draw_path_topic"    default="/hand_tracking/draw_path"/>
    <arg name="transform_topic"            default="/hand_tracking/camera_transform"/>
    <arg name="camera_info_topic"          default="/camera/color/camera_info"/>
    <arg name="depth_topic"                default="/camera/depth/image_rect_raw"/>

    <!-- ── 3D projection ────────────────────────────────────────────── -->
    <arg name="use_depth"   default="False"/>
    <arg name="fixed_depth" default="0.5"/>
    <arg name="camera_fx"   default="600.0"/>
    <arg name="camera_fy"   default="600.0"/>
    <arg name="camera_cx"   default="320.0"/>
    <arg name="camera_cy"   default="240.0"/>

    <node name="hand_tracking" pkg="ros_hand_tracking" type="hand_tracking.py" output="screen"
          launch-prefix="/home/dfab/anaconda3/envs/daehong/bin/python -u">

        <!-- Core tracker -->
        <param name="model_path"               type="string" value="$(arg model_path)"/>
        <param name="num_hands"                type="int"    value="$(arg num_hands)"/>
        <param name="min_detection_confidence" type="double" value="$(arg min_detection_confidence)"/>
        <param name="min_tracking_confidence"  type="double" value="$(arg min_tracking_confidence)"/>
        <param name="enable_gesture"           type="bool"   value="$(arg enable_gesture)"/>
        <param name="show_image"               type="bool"   value="$(arg show_image)"/>

        <!-- Topics -->
        <param name="subscribe_image_topic"      type="string" value="$(arg subscribe_image_topic)"/>
        <param name="publish_landmarks_topic"    type="string" value="$(arg publish_landmarks_topic)"/>
        <param name="publish_gesture_topic"      type="string" value="$(arg publish_gesture_topic)"/>
        <param name="publish_landmarks_3d_topic" type="string" value="$(arg publish_landmarks_3d_topic)"/>
        <param name="publish_draw_path_topic"    type="string" value="$(arg publish_draw_path_topic)"/>
        <param name="transform_topic"            type="string" value="$(arg transform_topic)"/>
        <param name="camera_info_topic"          type="string" value="$(arg camera_info_topic)"/>
        <param name="depth_topic"                type="string" value="$(arg depth_topic)"/>

        <!-- 3D projection -->
        <param name="use_depth"   type="bool"   value="$(arg use_depth)"/>
        <param name="fixed_depth" type="double" value="$(arg fixed_depth)"/>
        <param name="camera_fx"   type="double" value="$(arg camera_fx)"/>
        <param name="camera_fy"   type="double" value="$(arg camera_fy)"/>
        <param name="camera_cx"   type="double" value="$(arg camera_cx)"/>
        <param name="camera_cy"   type="double" value="$(arg camera_cy)"/>

    </node>
</launch>
